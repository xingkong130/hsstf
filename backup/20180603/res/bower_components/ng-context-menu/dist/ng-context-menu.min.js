!function(e){"use strict";function t(){var e={element:null,menuElement:null};return e}function n(t,n,i){function c(c,l,o){function a(e,n){n.addClass("open");var i=t[0].documentElement,l=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),o=(window.pageYOffset||i.scrollTop)-(i.clientTop||0),a=n[0].scrollWidth,u=n[0].scrollHeight,d=i.clientWidth+l,m=i.clientHeight+o,r=a+e.pageX,s=u+e.pageY,p=Math.max(e.pageX-l,0),b=Math.max(e.pageY-o,0);if(r>d&&(p-=r-d),s>m){var f=c.marginBottom||0;b=b-(s-m)-f}n.css("top",b+"px"),n.css("left",p+"px"),x=!0}function u(e){e.removeClass("open"),x&&c.closeCallback(),x=!1}function d(t){c.disabled()||(n.menuElement&&u(n.menuElement),n.menuElement=e.element(document.getElementById(m())),n.element=t.target,t.preventDefault(),t.stopPropagation(),c.$apply(function(){c.callback({$event:t})}),c.$apply(function(){a(t,n.menuElement)}))}function m(){return c.contextMenuItems?o.id+"-menu":o.target}function r(e){!c.disabled()&&x&&27===e.keyCode&&c.$apply(function(){u(n.menuElement)})}function s(e){c.disabled()||!x||2===e.button&&e.target===n.element||c.$apply(function(){u(n.menuElement)})}function p(){l.bind("contextmenu",d),t.bind("keyup",r),t.bind("click",s),t.bind("contextmenu",s),c.$on("$destroy",function(){t.unbind("keyup",r),t.unbind("click",s),t.unbind("contextmenu",s)})}function b(){l.attr("data-target",o.id+"-menu");var e=c.contextMenuItems,t=document.createElement("div");t.className="dropdown position-fixed",t.id=o.id+"-menu";var n=document.createElement("ul");n.className="dropdown-menu",n.setAttribute("role","menu"),e.forEach(function(e,t,i){var l=document.createElement("li");c.contextMenuItems[t].disabled&&l.setAttribute("ng-class",'{"disabled": isDisabled('+t+")}"),l.appendChild(f(e,t)),n.appendChild(l)}),t.appendChild(n);var a=i(t)(c);l.append(a)}function f(e,t){var n=document.createElement("a");return n.className="pointer",n.setAttribute("role","menuitem"),n.setAttribute("tabindex",t),n.setAttribute("ng-click","callbackHandler("+t+")"),n.id=o.id+"-menu-item-"+t,n.appendChild(document.createTextNode(e.title)),n}var x=!1;c.contextMenuItems&&b(),p(),c.callbackHandler=function(e){c.isDisabled(e)||c.contextMenuItems[e].callback(document.getElementById(o.id))},c.isDisabled=function(e){return c.contextMenuItems[e].disabled?c.contextMenuItems[e].disabled(document.getElementById(o.id)):void 0}}return{restrict:"A",scope:{callback:"&contextMenu",disabled:"&contextMenuDisabled",closeCallback:"&contextMenuClose",marginBottom:"@contextMenuMarginBottom",contextMenuItems:"="},link:c}}e.module("ng-context-menu",[]).factory("ContextMenuService",t).directive("contextMenu",["$document","ContextMenuService","$compile",n])}(angular);